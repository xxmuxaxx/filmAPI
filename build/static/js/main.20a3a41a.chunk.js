(this.webpackJsonpfilmapi=this.webpackJsonpfilmapi||[]).push([[0],{124:function(e,a,t){},125:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),i=t.n(r),c=t(14),m=t(18),o=t(28),s=t(75),u=t(8),d={items:[],activeItem:null,isLoaded:!1,totalItems:0},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_FILMS":return Object(u.a)(Object(u.a)({},e),{},{items:a.payload.items,totalItems:a.payload.totalItems,isLoaded:!0});case"SET_ACTIVE_FILM":return Object(u.a)(Object(u.a)({},e),{},{activeItem:a.payload});case"SET_LOADED":return Object(u.a)(Object(u.a)({},e),{},{isLoaded:a.payload});default:return e}},v={page:1,pageSize:16},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_PAGE":return Object(u.a)(Object(u.a)({},e),{},{page:a.payload});default:return e}},_={searchText:"",searchItems:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_SEARCH_TEXT":return Object(u.a)(Object(u.a)({},e),{},{searchText:a.payload});case"SET_SEARCH_ITEMS":return Object(u.a)(Object(u.a)({},e),{},{searchItems:a.payload});default:return e}},b={user:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return Object(u.a)(Object(u.a)({},e),{},{user:a.payload});case"SET_USER_AVATAR":return console.log(a.payload),Object(u.a)(Object(u.a)({},e),{},{user:Object(u.a)(Object(u.a)({},e.user),{},{avatar:a.payload})});default:return e}},h=Object(o.c)({films:p,pagination:E,search:f,users:g}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,y=Object(o.e)(h,N(Object(o.a)(s.a))),F=t(11),D=t(15),I=function(){return l.a.createElement(m.c,{to:"/",className:"logo"},l.a.createElement("svg",{className:"logo__svg",viewBox:"0 0 80 67",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M65.356 38.7048H61.3287V33.9083C66.8456 30.8006 70.5823 24.8877 70.5823 18.115C70.5823 8.1263 62.4598 0 52.4757 0C44.4803 0 37.6834 5.21366 35.2912 12.4196C32.8987 5.21366 26.102 0.000222284 18.1066 0.000222284C8.12253 0.000222284 0 8.12652 0 18.115C0 24.8877 3.7367 30.8004 9.25339 33.9081V67H61.3285V59.0652H65.9613L80 66.6146V31.1963L65.356 38.7048ZM24.4999 27.9578L18.1066 24.1024L11.7134 27.9578L13.4027 20.6834L7.76196 15.7915L15.1994 15.151L18.1066 8.27242L21.0137 15.151L28.4511 15.7915L22.8104 20.6834L24.4999 27.9578ZM31.0449 30.7702C32.9476 28.8235 34.4144 26.4513 35.2912 23.8104C36.1679 26.451 37.6347 28.8235 39.5374 30.7702H31.0449ZM57.1796 20.6834L58.8689 27.9578L52.4757 24.1024L46.0825 27.9578L47.7717 20.6834L42.131 15.7915L49.5684 15.151L52.4755 8.27242L55.3825 15.151L62.8199 15.7915L57.1796 20.6834Z"})),l.a.createElement("div",{className:"logo__text-wrapper"},l.a.createElement("p",{className:"logo__big-text"},"\u041a\u0430\u0432\u043a\u0430\u0437\u0441\u043a\u0438\u0439"),l.a.createElement("p",{className:"logo__text"},"\u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a")))},L=t(30),C=t.n(L),w=t(39),O=t(27),S=t.n(O),j=S.a.create({baseURL:"https://film-api-backend.herokuapp.com/movies/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}),k=function(e){return{type:"SET_SEARCH_TEXT",payload:e}},x=function(e){return{type:"SET_SEARCH_ITEMS",payload:e}},T=t(78),M=t.n(T),A=function(e){var a=e.type||"text";return l.a.createElement("input",{className:M.a.Input,type:a,name:e.name,value:e.value,placeholder:e.placeholder,autoComplete:e.autoComplete,onChange:e.onChange,required:e.required})},P=t(47),R=t.n(P),H=function(){var e=Object(c.b)(),a=Object(n.useRef)(),t=Object(F.f)(),r=Object(c.c)((function(e){return e.search})),i=r.searchText,o=r.searchItems;l.a.useEffect((function(){var a;i?(console.log("API GET SEARCH"),e((a=i,function(e){return j.get("/find?title=".concat(a)).then((function(a){var t=a.data;e(x(t.search))}))}))):e(x([]))}),[e,i]);var s=function(){var a=Object(w.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(k(""));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),u=function(){var a=Object(w.a)(C.a.mark((function a(n){var l;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),o.length&&(l=o[0].title,e(k("")),t.push("/film/".concat(l)));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return l.a.createElement("div",{className:R.a.Search},l.a.createElement("form",{onSubmit:u},l.a.createElement(A,{value:i,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430",onChange:function(a){e(k(a.target.value))}}),l.a.createElement("ul",{className:R.a.Dropdown,ref:a},o.map((function(e){return l.a.createElement("li",{key:e.id,"data-title":e.title},l.a.createElement(m.b,{to:"/film/".concat(e.title),className:R.a.Link,onClick:s},e.title))}))),l.a.createElement("button",null)))},B=t(26),U=t.n(B),V=[{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",link:"/"},{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"/profile"}],W=function(e){var a=e.isMenuOpen,t=e.toggleMenuHandler;return l.a.createElement("div",{className:U()({menu:!0,"menu--active":a})},l.a.createElement("nav",{className:"nav"},l.a.createElement("ul",{className:"nav__list"},V.map((function(e,a){return l.a.createElement("li",{className:"nav__item",key:a},l.a.createElement(m.b,{to:e.link,className:"nav__link",onClick:t},e.name))})))))},q=function(e){var a=e.isMenuOpen,t=e.toggleMenuHandler;return l.a.createElement("div",{onClick:t,className:U()({hamburger:!0,"hamburger--active":a})},l.a.createElement("div",{className:"hamburger__item"}),l.a.createElement("div",{className:"hamburger__item"}),l.a.createElement("div",{className:"hamburger__item"}))};function z(){var e=Object(n.useState)(!1),a=Object(D.a)(e,2),t=a[0],r=a[1],i=function(){return r(!t)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"header__wrapper"},l.a.createElement(I,null),l.a.createElement(H,null),l.a.createElement(q,{isMenuOpen:t,toggleMenuHandler:i})))),l.a.createElement(W,{isMenuOpen:t,toggleMenuHandler:i}))}var G=t(79),Y=t.n(G),X=l.a.memo((function(e){return l.a.createElement("div",{className:Y.a.Layout},l.a.createElement(z,null),l.a.createElement("main",null,e.children),l.a.createElement("footer",{className:"footer"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"footer__wrapper"},l.a.createElement(m.c,{to:"/",className:"logo"},l.a.createElement("div",{className:"logo__text-wrapper"},l.a.createElement("p",{className:"logo__big-text"},"\u041a\u0430\u0432\u043a\u0430\u0437\u0441\u043a\u0438\u0439"),l.a.createElement("p",{className:"logo__text"},"\u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"))),l.a.createElement("div",{className:"copyright"},l.a.createElement("p",{className:"copyright__top"},"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e \u0432 \u0441\u0442\u0443\u0434\u0438\u0438"),l.a.createElement("p",{className:"copyright__bottom"},"\u041d\u0435 \u0442\u0432\u043e\u0438\u0445 \u0441\u043e\u0431\u0430\u0447\u044c\u0438\u0445 \u0434\u0435\u043b"))))))})),Z=t(80),J=t.n(Z),Q=t(48),$=t.n(Q),K=t(58),ee=t.n(K),ae=function(e){var a=[ee.a.Button,ee.a[e.type]];return l.a.createElement("button",{onClick:e.onClick,className:a.join(" "),disabled:e.disabled},e.children)},te=function(e){return l.a.createElement("div",{className:$.a.FilmCard},l.a.createElement("img",{src:e.poster,alt:e.filmName}),l.a.createElement("div",{className:$.a.FilmCardHover,onMouseEnter:e.onMouseEnter},l.a.createElement("div",{className:$.a.FilmInfo},l.a.createElement(m.c,{to:"/film/"+e.title},l.a.createElement(ae,{onClick:e.onClick},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),l.a.createElement("h3",null,e.filmName),l.a.createElement("p",null,e.filmYear))))},ne=t(59),le=t.n(ne);function re(){return l.a.createElement("div",{className:le.a.LoaderWrapper},l.a.createElement("div",{className:le.a.Loader}))}var ie=t(81),ce=function(){return l.a.createElement(ie.a,{className:"film-card-placeholder",height:"450"},l.a.createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",height:"100%",width:"100%"}))},me=t(60),oe=t.n(me),se=t(82),ue=t.n(se),de=t(21),pe=function(e){var a=e.search,t=e.totalResults;return{type:"SET_FILMS",payload:{items:Object(de.a)(a),totalItems:t}}},ve=function(e){return function(a){return a({type:"SET_ACTIVE_FILM",payload:e}),Promise.resolve()}};var Ee=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.films.items})),t=Object(c.c)((function(e){return e.films.totalItems})),n=Object(c.c)((function(e){return e.films.isLoaded})),r=Object(c.c)((function(e){return e.pagination})),i=r.page,m=r.pageSize;l.a.useEffect((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return function(t){t({type:"SET_LOADED",payload:!1}),j.get("/page=".concat(e,"/size=").concat(a)).then((function(e){var a=e.data;t(pe(a))}))}}(i,m))}),[e,i,m]);var o=l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:oe.a.FilmLibWrapper},a.map((function(e){return l.a.createElement(te,{key:e.id,title:e.title,poster:e.poster,filmName:e.title,filmYear:e.year})}))),l.a.createElement(J.a,{activePage:i,itemsCountPerPage:m,totalItemsCount:t,hideFirstLastPages:!0,hideNavigation:!0,onChange:function(a){if(a===i)return!1;e({type:"SET_PAGE",payload:a})}.bind(this)})),s=l.a.createElement("div",{className:"loading"},l.a.createElement("div",{className:"container"},l.a.createElement(re,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null),l.a.createElement(ce,null)));return l.a.createElement("div",{className:oe.a.FilmLib},l.a.createElement("section",{className:"hero"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"hero__wrapper"},l.a.createElement("div",{className:"hero__image-wrapper"},l.a.createElement("img",{className:"hero__image",src:ue.a,alt:"\u0421\u0442\u0435\u0442\u0445\u0435\u043c"})),l.a.createElement("div",{className:"hero__text-wrapper"},l.a.createElement("p",{className:"hero__text"},"\u041f\u043e\u0440\u0430 \u043d\u0430\u0447\u0430\u0442\u044c \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"),l.a.createElement("p",{className:"hero__big-text"},l.a.createElement("b",null,"\u041c\u0423\u0416\u0418\u0426\u041a\u0418\u0415")," \u0424\u0418\u041b\u042c\u041c\u042b"))))),n?o:s)},_e=t(49),fe=t(17),be=t.n(fe);var ge=function(e){var a=e.name,t=e.children;return l.a.createElement("div",{className:be.a.FilmDetailFieldItem},l.a.createElement("p",{className:be.a.FilmDetailFieldItemName},a),l.a.createElement("p",{className:be.a.FilmDetailFieldItemValue},t))},he=S.a.create({baseURL:"https://movie-database-imdb-alternative.p.rapidapi.com/",headers:{"x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":"421df21564mshec026f33dbed2d1p17da9djsn5014d3c84f92"}});S.a.create({baseURL:"https://youtube.googleapis.com/youtube/v3/"});var Ne=l.a.memo((function(e){var a=Object(c.b)(),t=Object(c.c)((function(e){return e.films})).activeItem,n=l.a.useState({item:[],loaded:!1}),r=Object(D.a)(n,2),i=r[0],o=r[1],s=l.a.useState(null),u=Object(D.a)(s,2),d=u[0],p=(u[1],"https://www.imdb.com/title/".concat(null===t||void 0===t?void 0:t.imdbID));l.a.useEffect((function(){if(t){he.get("?i=".concat(t.imdbID,"&r=json")).then((function(e){var a=e.data;return o({item:a,loaded:!0})}));"".concat(t.title," ").concat(t.year," \u0442\u0440\u0435\u0439\u043b\u0435\u0440");t.video}}),[t]),l.a.useEffect((function(){var t;return a((t=e.match.params.title,function(e){return j.get("/find?title=".concat(t)).then((function(a){var t=a.data;e(ve(t.search[0]))}))})),function(){return a(ve(null))}}),[a,e.match.params.title]);return l.a.createElement("div",{className:be.a.FilmDetail},t?function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:be.a.FilmDetailWrapper},l.a.createElement("div",{className:be.a.FilmDetailTop},l.a.createElement("div",{className:be.a.FilmDetailImageWrapper},l.a.createElement("img",{className:be.a.FilmDetailImage,src:t.poster,alt:t.title})),l.a.createElement("div",{className:be.a.FilmDetailRight},l.a.createElement("h1",null,t.title),l.a.createElement("p",null,t.titleEn),l.a.createElement("span",{className:be.a.id},"id: ",t.id),l.a.createElement("div",{className:be.a.FilmDetailField},l.a.createElement(ge,{name:"\u0413\u043e\u0434"},t.year),l.a.createElement(ge,{name:"\u0421\u0442\u0440\u0430\u043d\u0430"},t.country),l.a.createElement(ge,{name:"\u0410\u043a\u0442\u0435\u0440\u044b"},i.loaded?i.item.Actors:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),l.a.createElement(ge,{name:"IMDb"},l.a.createElement("a",{href:p,target:"_blank",rel:"noopener noreferrer"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")),l.a.createElement(ge,{name:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 IMDb"},i.loaded?i.item.imdbRating:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),l.a.createElement(ge,{name:"Metascore"},i.loaded?i.item.Metascore:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),l.a.createElement(ge,{name:"\u0416\u0430\u043d\u0440\u044b"},t&&t.genres.map((function(e){return e.name})).join(", ")),l.a.createElement(ge,{name:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},i.loaded?i.item.Runtime:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),l.a.createElement(ge,{name:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"},i.loaded?i.item.Rated:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")),l.a.createElement(m.b,{to:"/",className:be.a.FilmDetailLink},"\u041d\u0430\u0437\u0430\u0434"))),l.a.createElement("div",{className:be.a.FilmDetailBottom},l.a.createElement("div",{className:be.a.FilmDetailDescription},l.a.createElement("p",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"),l.a.createElement("br",null),l.a.createElement("p",null,t.description))),l.a.createElement("div",{className:"plyr-wrapper"},d?l.a.createElement(_e.a,{source:{type:"video",sources:[{src:d[(e=d.length,Math.floor(Math.random()*(Math.floor(e-1)-0+1))+0)].id.videoId,provider:"youtube"}]}}):t.video?l.a.createElement(_e.a,{source:{type:"video",sources:[{src:t.video,provider:"youtube"}]}}):l.a.createElement(_e.a,null))));var e}():l.a.createElement(re,null))})),ye=t(154),Fe=t(155),De=function(e){var a=e.onFormSubmit;return l.a.createElement("section",{className:"auth-section"},l.a.createElement("div",{className:"container"},l.a.createElement("form",{className:"auth-form",onSubmit:a},l.a.createElement("h2",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),l.a.createElement(ye.a,{className:"auth-form__input",name:"user-name",label:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",autoComplete:"username"}),l.a.createElement(ye.a,{className:"auth-form__input",name:"password",type:"password",label:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"current-password"}),l.a.createElement(Fe.a,{type:"submit",color:"primary",variant:"contained"},"\u0412\u043e\u0439\u0442\u0438"))))},Ie=t(85),Le=t.n(Ie),Ce=t(34),we=t.n(Ce),Oe=function(e){return l.a.createElement("form",{className:we.a.form,onSubmit:e.formSubmit,name:"create"},e.message&&l.a.createElement("p",{className:we.a.message},e.message),l.a.createElement(ye.a,{className:we.a.input,name:"imdbID",label:"imdbID",variant:"outlined",required:!0}),l.a.createElement(ye.a,{className:we.a.input,name:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",required:!0}),l.a.createElement(ye.a,{className:we.a.input,name:"video",label:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 (youtube id)",variant:"outlined"}),l.a.createElement(ye.a,{className:we.a.input,name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",rows:5,multiline:!0}),l.a.createElement(Fe.a,{name:"button",type:"submit",size:"large",color:"primary",variant:"contained",startIcon:l.a.createElement(Le.a,null)},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))},Se=t(86),je=t.n(Se),ke=t(19),xe=t.n(ke),Te=function(e){return l.a.createElement("form",{className:xe.a.form,onSubmit:e.formSubmit,name:"edit",onChange:e.formChange},e.message&&l.a.createElement("p",{className:xe.a.message},e.message),l.a.createElement(ye.a,{className:xe.a.input,name:"id",label:"ID",variant:"outlined",InputLabelProps:{shrink:!0},required:!0}),l.a.createElement(ye.a,{className:xe.a.input,name:"imdbID",label:"imdbID",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"titleEn",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u043e\u043c",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"year",label:"\u0413\u043e\u0434",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"country",label:"\u0421\u0442\u0440\u0430\u043d\u0430",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"poster",label:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 (url)",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"video",label:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 (youtube key)",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"genres",label:"\u0416\u0430\u043d\u0440\u044b (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"type",label:"\u0422\u0438\u043f (movie, series)",variant:"outlined",InputLabelProps:{shrink:!0}}),l.a.createElement(ye.a,{className:xe.a.input,name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",InputLabelProps:{shrink:!0},rows:5,multiline:!0}),l.a.createElement(Fe.a,{name:"button",type:"submit",size:"large",color:"primary",variant:"contained",startIcon:l.a.createElement(je.a,null)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},Me=t(87),Ae=t.n(Me),Pe=t(50),Re=t.n(Pe),He=function(e){return l.a.createElement("form",{className:Re.a.form,onSubmit:e.formSubmit,name:"delete"},e.message&&l.a.createElement("p",{className:Re.a.message},e.message),l.a.createElement(ye.a,{className:Re.a.input,name:"id",label:"ID",variant:"outlined",InputLabelProps:{shrink:!0},required:!0}),l.a.createElement(Fe.a,{name:"button",type:"submit",size:"large",color:"primary",variant:"contained",startIcon:l.a.createElement(Ae.a,null)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))},Be=function(e){return l.a.createElement("div",{className:U()({modal:!0,"modal--active":e.isModalOpen}),onClick:function(a){a.target===a.currentTarget&&e.toggleModalHadler()}},l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"modal-top"},l.a.createElement("h4",{className:"modal-top__title"},e.title),l.a.createElement("div",{className:"modal-top__close-button",onClick:e.toggleModalHadler})),l.a.createElement("div",{className:"modal-content"},e.children)))},Ue=t(35),Ve=t.n(Ue),We=function(){var e=l.a.useState(!1),a=Object(D.a)(e,2),t=a[0],n=a[1],r=l.a.useState(null),i=Object(D.a)(r,2),c=i[0],m=i[1],o=l.a.useState(null),s=Object(D.a)(o,2),u=s[0],d=s[1],p=l.a.useState(null),v=Object(D.a)(p,2),E=v[0],_=v[1];l.a.useEffect((function(){!t&&_(null)}),[t]);var f=function(e){e.preventDefault();var a=e.target,t={};switch(a.name){case"create":he.get("?i=".concat(a.imdbID.value,"&r=json")).then((function(e){var n=e.data;return t={imdbID:a.imdbID.value,title:a.title.value,description:a.description.value,country:n.Country,genres:n.Genre.split(",").map((function(e){return{name:e}})),poster:n.Poster,titleEn:n.Title,type:n.Type,video:a.video.value,year:+n.Year},j.post("create",t).then((function(){return _("\u0423\u0441\u043f\u0435\u0448\u043d\u043e")})),a.reset()}));break;case"edit":t={country:a.country.value,description:a.description.value,genres:a.genres.value.split(",").map((function(e){return{name:e}})),id:a.id.value,imdbID:a.imdbID.value,poster:a.poster.value,title:a.title.value,titleEn:a.titleEn.value,type:a.type.value,video:a.video.value,year:+a.year.value},j.put("update/".concat(a.id.value),t).then((function(){return _("\u0423\u0441\u043f\u0435\u0448\u043d\u043e")})).catch((function(e){return console.warn(e)})),a.reset();break;case"delete":j.delete("delete/".concat(a.id.value)).then((function(){return _("\u0423\u0441\u043f\u0435\u0448\u043d\u043e")})),a.reset();break;default:return console.warn("\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u0444\u043e\u0440\u043c\u044b")}},b=function(e){var a,l;n(!t),m((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.innerText)||null),d((null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.dataset.content)||null)};return l.a.createElement("div",{className:Ve.a.API},l.a.createElement("h2",{className:Ve.a.title},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432"),l.a.createElement("div",{className:Ve.a.wrapper},l.a.createElement("button",{className:Ve.a.button,onClick:b,"data-content":"create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"),l.a.createElement("button",{className:Ve.a.button,onClick:b,"data-content":"edit"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"),l.a.createElement("button",{className:Ve.a.button,onClick:b,"data-content":"delete"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),l.a.createElement(Be,{title:c,toggleModalHadler:b,isModalOpen:t},"create"===u&&l.a.createElement(Oe,{formSubmit:f,message:E}),"edit"===u&&l.a.createElement(Te,{formSubmit:f,formChange:function(e){var a=e.target,t=e.currentTarget;if("id"===a.name){var n=a.value;t.button.disabled=!0,j.get("/find/{id}?id=".concat(n)).then((function(e){var a=e.data;t.country.value=a.search[0].country,t.description.value=a.search[0].description,t.genres.value=Object(de.a)(a.search[0].genres.map((function(e){return e.name}))).join(", "),t.imdbID.value=a.search[0].imdbID,t.poster.value=a.search[0].poster,t.video.value=a.search[0].video,t.title.value=a.search[0].title,t.titleEn.value=a.search[0].titleEn,t.type.value=a.search[0].type,t.year.value=a.search[0].year,t.button.disabled=!1})).catch((function(){t.country.value="",t.description.value="",t.genres.value="",t.imdbID.value="",t.poster.value="",t.video.value="",t.title.value="",t.titleEn.value="",t.type.value="",t.year.value="",t.button.disabled=!1}))}},message:E}),"delete"===u&&l.a.createElement(He,{formSubmit:f,message:E})))},qe=function(e){var a=e.user,t=e.onImageChange,n=e.onButtonClick,r=a.avatar?a.avatar:"https://www.tclilibrary.com/admin2/dist/use.png";return l.a.createElement("section",{className:"profile-section"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"profile-about"},l.a.createElement("h1",{className:"page-title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),l.a.createElement("div",{className:"profile-about__wrapper"},l.a.createElement("div",{className:"profile-about__aside"},l.a.createElement("div",{className:"profile-info"},l.a.createElement("div",{className:"profile-info__image-wrapper"},l.a.createElement("label",null,l.a.createElement("input",{name:"avatar",type:"file",style:{display:"none"},accept:".jpg, .jpeg, .png",onChange:t}),l.a.createElement("img",{className:"profile-info__image",src:r,alt:a.name}))),l.a.createElement("button",{className:"profile-info__logout",onClick:n},"\u0412\u044b\u0439\u0442\u0438"),l.a.createElement("div",{className:"profile-info__name"},a.name))),l.a.createElement("div",{className:"profile-about__content"},a.isAdmin?l.a.createElement(We,null):null)))))},ze=S.a.create({baseURL:"http://w91691o1.beget.tech/api/v1/"}),Ge=function(e){return function(a){ze.get("users/?u=".concat(e.login,"&p=").concat(e.password)).then((function(t){var n=t.data;document.cookie="login=".concat(e.login),document.cookie="password=".concat(e.password),a(Ye(n))})).catch((function(){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},Ye=function(e){return{type:"SET_USER",payload:e}},Xe=function(e){return{type:"SET_USER_AVATAR",payload:e}},Ze=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return e.users})).user,t=function(){var a=Object(w.a)(C.a.mark((function a(t){var n,l;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.preventDefault(),n=t.target["user-name"].value,l=t.target.password.value,e(Ge({login:n,password:l}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return a?l.a.createElement(qe,{onFormSubmit:t,onImageChange:function(t){var n,l=new FormData;l.append("avatar",t.target.files[0]),l.append("id",a.id),a.avatar&&l.append("url",a.avatar.split("/").reverse()[0]),e((n=l,function(e){ze.post("users/",n).then((function(a){var t=a.data;return e(Xe(t.url))}))}))},onButtonClick:function(){e(Ye(null)),Qe("login"),Qe("password")},user:a}):l.a.createElement(De,{onFormSubmit:t})};function Je(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0}function Qe(e){!function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(t=Object(u.a)({path:"/"},t)).expires instanceof Date&&(t.expires=t.expires.toUTCString());var n=encodeURIComponent(e)+"="+encodeURIComponent(a);for(var l in t){n+="; "+l;var r=t[l];!0!==r&&(n+="="+r)}document.cookie=n}(e,"",{"max-age":-1})}var $e=function(){var e=Object(c.b)();if(Je("login")){var a=Je("login"),t=Je("password");e(Ge({login:a,password:t}))}return l.a.createElement(X,null,l.a.createElement(F.c,null,l.a.createElement(F.a,{path:"/film/:title",component:Ne}),l.a.createElement(F.a,{path:"/profile/",component:Ze}),l.a.createElement(F.a,{path:"/",component:Ee})))},Ke=(t(124),l.a.createElement(m.a,null,l.a.createElement(c.a,{store:y},l.a.createElement($e,null))));i.a.render(Ke,document.getElementById("root"))},17:function(e,a,t){e.exports={FilmDetail:"FilmDetail_FilmDetail__Pavxa",FilmDetailTop:"FilmDetail_FilmDetailTop__1ll3G",FilmDetailImageWrapper:"FilmDetail_FilmDetailImageWrapper__1U1Ez",FilmDetailImage:"FilmDetail_FilmDetailImage__31692",FilmDetailRight:"FilmDetail_FilmDetailRight__2D7kY",FilmDetailField:"FilmDetail_FilmDetailField__4jO6v",FilmDetailFieldItem:"FilmDetail_FilmDetailFieldItem__3fbd7",FilmDetailFieldItemName:"FilmDetail_FilmDetailFieldItemName__T4jus",FilmDetailFieldItemValue:"FilmDetail_FilmDetailFieldItemValue__CBBY9",FilmDetailBottom:"FilmDetail_FilmDetailBottom__39Cwz",FilmDetailDescription:"FilmDetail_FilmDetailDescription__2EXpy",FilmDetailLink:"FilmDetail_FilmDetailLink__1wT6Z",id:"FilmDetail_id__1_PtY"}},19:function(e,a,t){e.exports={form:"EditFilm_form__2eg_g",input:"EditFilm_input__36SrA",message:"EditFilm_message__23vGL"}},34:function(e,a,t){e.exports={form:"CreateFilm_form__1PTed",input:"CreateFilm_input__3ONeu",message:"CreateFilm_message__1nvVn"}},35:function(e,a,t){e.exports={wrapper:"API_wrapper__1aSB6",title:"API_title__1ZQn5",button:"API_button__1LxHb"}},47:function(e,a,t){e.exports={Search:"Search_Search__di4ea",Dropdown:"Search_Dropdown__2lVVF",Link:"Search_Link__1EHio"}},48:function(e,a,t){e.exports={FilmCard:"FilmCard_FilmCard__2XgCu",FilmCardHover:"FilmCard_FilmCardHover__2yfUH",FilmInfo:"FilmCard_FilmInfo__BovdC"}},50:function(e,a,t){e.exports={form:"DeleteFilm_form__1sx6O",input:"DeleteFilm_input__rF2rW",message:"DeleteFilm_message__CdqAR"}},58:function(e,a,t){e.exports={Button:"Button_Button__MQwo6",error:"Button_error__2DMFG",success:"Button_success__2fmAL",primary:"Button_primary__ls6AW"}},59:function(e,a,t){e.exports={LoaderWrapper:"Loader_LoaderWrapper__3haqL",Loader:"Loader_Loader__2oUp4","lds-dual-ring":"Loader_lds-dual-ring__2hE87"}},60:function(e,a,t){e.exports={FilmLib:"FilmLib_FilmLib__BgQ1J",FilmLibWrapper:"FilmLib_FilmLibWrapper__23xs6",show:"FilmLib_show__1y_Se"}},78:function(e,a,t){e.exports={Input:"Input_Input__1C9aY"}},79:function(e,a,t){e.exports={Layout:"Layout_Layout__1l72h"}},82:function(e,a,t){e.exports=t.p+"static/media/hero-img.a3143511.png"},93:function(e,a,t){e.exports=t(125)}},[[93,1,2]]]);
//# sourceMappingURL=main.20a3a41a.chunk.js.map