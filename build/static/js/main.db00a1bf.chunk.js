(this.webpackJsonpfilmapi=this.webpackJsonpfilmapi||[]).push([[0],{100:function(e,t,a){e.exports={form:"EditFilm_form__sbFSY",input:"EditFilm_input__137I4",message:"EditFilm_message__3c4vq",errorMessage:"EditFilm_errorMessage__2DGJJ"}},101:function(e,t,a){e.exports={form:"DeleteFilm_form__396gS",input:"DeleteFilm_input__1MLi5",message:"DeleteFilm_message__1P62T"}},122:function(e,t,a){e.exports={Search:"Search_Search__di4ea",Dropdown:"Search_Dropdown__2lVVF",Link:"Search_Link__1EHio"}},148:function(e,t,a){e.exports={Button:"Button_Button__MQwo6",error:"Button_error__2DMFG",success:"Button_success__2fmAL",primary:"Button_primary__ls6AW"}},149:function(e,t,a){e.exports={LoaderWrapper:"Loader_LoaderWrapper__3haqL",Loader:"Loader_Loader__2oUp4","lds-dual-ring":"Loader_lds-dual-ring__2hE87"}},152:function(e,t,a){e.exports={FilmsContainer:"FilmsContainer_FilmsContainer__3_xWo",FilmLibWrapper:"FilmsContainer_FilmLibWrapper__3KE48",show:"FilmsContainer_show__2Vcp8"}},197:function(e,t,a){e.exports={Input:"Input_Input__1C9aY"}},198:function(e,t,a){e.exports={Layout:"Layout_Layout__3gHwl"}},199:function(e,t,a){e.exports={FilmsContainer:"IndexPage_FilmsContainer__1Vx8o"}},245:function(e,t,a){e.exports=a(379)},31:function(e,t,a){e.exports={FilmDetail:"FilmDetail_FilmDetail__Pavxa",FilmDetailTop:"FilmDetail_FilmDetailTop__1ll3G",FilmDetailImageWrapper:"FilmDetail_FilmDetailImageWrapper__1U1Ez",FilmDetailImage:"FilmDetail_FilmDetailImage__31692",FilmDetailRight:"FilmDetail_FilmDetailRight__2D7kY",FilmDetailField:"FilmDetail_FilmDetailField__4jO6v",FilmDetailFieldItem:"FilmDetail_FilmDetailFieldItem__3fbd7",FilmDetailFieldItemName:"FilmDetail_FilmDetailFieldItemName__T4jus",FilmDetailFieldItemValue:"FilmDetail_FilmDetailFieldItemValue__CBBY9",FilmDetailBottom:"FilmDetail_FilmDetailBottom__39Cwz",FilmDetailDescription:"FilmDetail_FilmDetailDescription__2EXpy",FilmDetailLink:"FilmDetail_FilmDetailLink__1wT6Z",id:"FilmDetail_id__1_PtY"}},378:function(e,t,a){},379:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),i=a.n(l),c=a(13),o=a(24),m=a(19),s=a(195),u=a(192),d=a(17),p={items:[],activeItem:null,isLoaded:!1,totalItems:0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILMS":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload.items,totalItems:t.payload.totalItems,isLoaded:!0});case"SET_ACTIVE_FILM":return Object(d.a)(Object(d.a)({},e),{},{activeItem:t.payload});case"SET_LOADED":return Object(d.a)(Object(d.a)({},e),{},{isLoaded:t.payload});default:return e}},E={page:1,pageSize:12},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":return Object(d.a)(Object(d.a)({},e),{},{page:t.payload});default:return e}},_={searchText:"",searchItems:[]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_TEXT":return Object(d.a)(Object(d.a)({},e),{},{searchText:t.payload});case"SET_SEARCH_ITEMS":return Object(d.a)(Object(d.a)({},e),{},{searchItems:t.payload});default:return e}},h={user:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(d.a)(Object(d.a)({},e),{},{user:t.payload});case"SET_USER_AVATAR":return Object(d.a)(Object(d.a)({},e),{},{user:Object(d.a)(Object(d.a)({},e.user),{},{avatar:t.payload})});default:return e}},N=Object(m.c)({films:f,pagination:v,search:b,users:g,form:u.a}),O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,F=Object(m.e)(N,O(Object(m.a)(s.a))),j=a(18),y=a(9),w=function(){return r.a.createElement(o.c,{to:"/",className:"logo"},r.a.createElement("svg",{className:"logo__svg",viewBox:"0 0 80 67",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M65.356 38.7048H61.3287V33.9083C66.8456 30.8006 70.5823 24.8877 70.5823 18.115C70.5823 8.1263 62.4598 0 52.4757 0C44.4803 0 37.6834 5.21366 35.2912 12.4196C32.8987 5.21366 26.102 0.000222284 18.1066 0.000222284C8.12253 0.000222284 0 8.12652 0 18.115C0 24.8877 3.7367 30.8004 9.25339 33.9081V67H61.3285V59.0652H65.9613L80 66.6146V31.1963L65.356 38.7048ZM24.4999 27.9578L18.1066 24.1024L11.7134 27.9578L13.4027 20.6834L7.76196 15.7915L15.1994 15.151L18.1066 8.27242L21.0137 15.151L28.4511 15.7915L22.8104 20.6834L24.4999 27.9578ZM31.0449 30.7702C32.9476 28.8235 34.4144 26.4513 35.2912 23.8104C36.1679 26.451 37.6347 28.8235 39.5374 30.7702H31.0449ZM57.1796 20.6834L58.8689 27.9578L52.4757 24.1024L46.0825 27.9578L47.7717 20.6834L42.131 15.7915L49.5684 15.151L52.4755 8.27242L55.3825 15.151L62.8199 15.7915L57.1796 20.6834Z"})),r.a.createElement("div",{className:"logo__text-wrapper"},r.a.createElement("p",{className:"logo__big-text"},"\u041a\u0430\u0432\u043a\u0430\u0437\u0441\u043a\u0438\u0439"),r.a.createElement("p",{className:"logo__text"},"\u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a")))},D=a(21),I=a.n(D),C=a(33),S=a(69),x=a.n(S),k=x.a.create({baseURL:"https://film-api-backend.herokuapp.com/movies/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}),L={instance:k,getFilmById:function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/find/{id}?id=".concat(t)).then((function(e){return e.data.search[0]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getFilmsPage:function(){var e=Object(C.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/page=".concat(t,"/size=").concat(a)).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),searchFilms:function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/find?title=".concat(t)).then((function(e){return e.data.search}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchFilmsPageable:function(){var e=Object(C.a)(I.a.mark((function e(t,a){var n,r=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:1,e.next=3,k.get("/page=".concat(n,"/size=").concat(a,"/find?title=").concat(t)).then((function(e){return e.data.search}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateFilm:function(e,t){return k.put("/update/".concat(e),t)},deleteFilm:function(e){return k.delete("delete/".concat(e))}},M=function(e){return{type:"SET_SEARCH_TEXT",payload:e}},T=function(e){return{type:"SET_SEARCH_ITEMS",payload:e}},A=function(e,t,a){var r=Object(n.useCallback)(e,a);Object(n.useEffect)((function(){var e=setTimeout((function(){r()}),t);return function(){clearTimeout(e)}}),[r,t])},B=a(197),R=a.n(B),H=function(e){var t=e.type||"text";return r.a.createElement("input",{className:R.a.Input,type:t,name:e.name,value:e.value,placeholder:e.placeholder,autoComplete:e.autoComplete,onChange:e.onChange,required:e.required})},P=a(122),U=a.n(P),V=function(){var e=Object(c.c)(),t=Object(n.useRef)(),a=Object(j.g)(),l=Object(c.d)((function(e){return e.search})),i=l.searchText,m=l.searchItems;A((function(){var t;e(i?(t=i,function(e){return L.searchFilmsPageable(t,10).then((function(t){e(T(t))}))}):T([]))}),300,[e,i]);var s=function(){var t=Object(C.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(M(""));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(C.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),m.length&&(r=m[0].title,e(M("")),a.push("/film/".concat(r)));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:U.a.Search},r.a.createElement("form",{onSubmit:u},r.a.createElement(H,{value:i,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430",onChange:function(t){e(M(t.target.value))}}),r.a.createElement("ul",{className:U.a.Dropdown,ref:t},m.map((function(e){return r.a.createElement("li",{key:e.id,"data-title":e.title},r.a.createElement(o.b,{to:"/films/".concat(e.title),className:U.a.Link,onClick:s},e.title))}))),r.a.createElement("button",null)))},W=a(44),z=a.n(W),q=[{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",link:"/"},{name:"\u0424\u0438\u043b\u044c\u043c\u044b",link:"/films"},{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"/profile"}],Y=function(e){var t=e.isMenuOpen,a=e.toggleMenuHandler;return r.a.createElement("div",{className:z()({menu:!0,"menu--active":t})},r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav__list"},q.map((function(e,t){return r.a.createElement("li",{className:"nav__item",key:t},r.a.createElement(o.b,{to:e.link,className:"nav__link",onClick:a},e.name))})))))},G=function(e){var t=e.isMenuOpen,a=e.toggleMenuHandler;return r.a.createElement("div",{onClick:a,className:z()({hamburger:!0,"hamburger--active":t})},r.a.createElement("div",{className:"hamburger__item"}),r.a.createElement("div",{className:"hamburger__item"}),r.a.createElement("div",{className:"hamburger__item"}))};function X(){var e=Object(n.useState)(!1),t=Object(y.a)(e,2),a=t[0],l=t[1],i=function(){return l(!a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header__wrapper"},r.a.createElement(w,null),r.a.createElement(V,null),r.a.createElement(G,{isMenuOpen:a,toggleMenuHandler:i})))),r.a.createElement(Y,{isMenuOpen:a,toggleMenuHandler:i}))}var Z=function(e){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"footer__wrapper"},r.a.createElement(o.c,{to:"/",className:"logo"},r.a.createElement("div",{className:"logo__text-wrapper"},r.a.createElement("p",{className:"logo__big-text"},"\u041a\u0430\u0432\u043a\u0430\u0437\u0441\u043a\u0438\u0439"),r.a.createElement("p",{className:"logo__text"},"\u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a"))),r.a.createElement("div",{className:"copyright"},r.a.createElement("p",{className:"copyright__top"},"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e \u0432 \u0441\u0442\u0443\u0434\u0438\u0438"),r.a.createElement("p",{className:"copyright__bottom"},"\u041d\u0435 \u0442\u0432\u043e\u0438\u0445 \u0441\u043e\u0431\u0430\u0447\u044c\u0438\u0445 \u0434\u0435\u043b")))))},J=a(198),Q=a.n(J),$=x.a.create({baseURL:"http://w91691o1.beget.tech/api/v1/"}),K={getUser:function(){var e=Object(C.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("users/?u=".concat(t,"&p=").concat(a)).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),setUserAvatar:function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post("users/",t).then((function(e){return e.data.url}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function ee(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function te(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a=Object(d.a)({path:"/"},a)).expires instanceof Date&&(a.expires=a.expires.toUTCString());var n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in a){n+="; "+r;var l=a[r];!0!==l&&(n+="="+l)}document.cookie=n}function ae(e){te(e,"",{"max-age":-1})}var ne=function(e){return function(t){K.getUser(e.login,e.password).then((function(a){1===a.status?(te("login",e.login),te("password",e.password),t(re(a))):alert(a.message)}))}},re=function(e){return{type:"SET_USER",payload:e}},le=function(e){return{type:"SET_USER_AVATAR",payload:e}},ie=function(e){var t=Object(c.c)();if(ee("login")){var a=ee("login"),n=ee("password");t(ne({login:a,password:n}))}return r.a.createElement("div",{className:Q.a.Layout},r.a.createElement(X,null),r.a.createElement("main",null,e.children),r.a.createElement(Z,null))},ce=a(75),oe=a(93),me=a.n(oe),se=function(e){var t=e.link,a=Object(ce.a)(e,["link"]);return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"container"},t?r.a.createElement(o.b,{to:t,className:"hero__wrapper"},r.a.createElement("div",{className:"hero__image-wrapper"},r.a.createElement("img",{className:"hero__image",src:me.a,alt:"\u0421\u0442\u0435\u0442\u0445\u0435\u043c"})),r.a.createElement("div",{className:"hero__text-wrapper"},a.children)):r.a.createElement("div",{className:"hero__wrapper"},r.a.createElement("div",{className:"hero__image-wrapper"},r.a.createElement("img",{className:"hero__image",src:me.a,alt:"\u0421\u0442\u0435\u0442\u0445\u0435\u043c"})),r.a.createElement("div",{className:"hero__text-wrapper"},a.children))))},ue=a(199),de=a.n(ue);var pe=function(e){return r.a.createElement("div",{className:de.a.FilmsContainer},r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"container"},r.a.createElement(se,{link:"/films/"},r.a.createElement("p",{className:"hero__text"},"\u041f\u043e\u0440\u0430 \u043d\u0430\u0447\u0430\u0442\u044c \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"),r.a.createElement("p",{className:"hero__big-text"},r.a.createElement("b",null,"\u041c\u0423\u0416\u0418\u0426\u041a\u0418\u0415")," \u0424\u0418\u041b\u042c\u041c\u042b")))))},fe=a(147),Ee=a.n(fe),ve=a(148),_e=a.n(ve),be=function(e){var t=[_e.a.Button,_e.a[e.type]];return r.a.createElement("button",{onClick:e.onClick,className:t.join(" "),disabled:e.disabled},e.children)},he=a(424),ge=a(428),Ne=a(99),Oe=a.n(Ne),Fe=function(e){var t=e.onClickDeleteButton,a=e.onClickEditButton,n=e.showButtons,l=Object(ce.a)(e,["onClickDeleteButton","onClickEditButton","showButtons"]);return r.a.createElement("div",{className:Oe.a.Card},r.a.createElement("img",{src:l.poster,alt:l.filmName}),r.a.createElement("div",{className:Oe.a.Hover,onMouseEnter:l.onMouseEnter},n&&r.a.createElement("div",{className:Oe.a.Buttons},r.a.createElement(be,{onClick:a},r.a.createElement(he.a,null)),r.a.createElement(be,{onClick:t},r.a.createElement(ge.a,null))),r.a.createElement("div",{className:Oe.a.Info},r.a.createElement(o.c,{to:"/films/"+l.title},r.a.createElement(be,{onClick:l.onClick},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),r.a.createElement("h3",null,l.filmName),r.a.createElement("p",null,l.filmYear))))},je=a(203),ye=function(){return r.a.createElement(je.a,{className:"film-card-placeholder",height:"450"},r.a.createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",height:"100%",width:"100%"}))},we=a(149),De=a.n(we);function Ie(){return r.a.createElement("div",{className:De.a.LoaderWrapper},r.a.createElement("div",{className:De.a.Loader}))}var Ce=a(59),Se=a(76),xe=a(74),ke=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),l=a[0],i=a[1],c=function(t){t.target===t.currentTarget&&e.closeModal()};return Object(n.useEffect)((function(){e.isOpen?setTimeout((function(){return i(!0)})):e.isOpen||setTimeout((function(){return i(!1)}))}),[e.isOpen]),r.a.createElement("div",{className:z()({modal:!0,"modal--active":l}),onClick:c},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"modal-top"},r.a.createElement("h4",{className:"modal-top__title"},e.title),r.a.createElement("div",{className:"modal-top__close-button",onClick:c})),r.a.createElement("div",{className:"modal-content"},e.children)))},Le=function(e){return function(t){Object(Se.a)(n,t);var a=Object(xe.a)(n);function n(){var t,l=this;Object(Ce.a)(this,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(t=a.call.apply(a,[this].concat(c))).state={isOpen:!1,isShow:!1,title:null,component:null,callback:null},t.openModal=function(){return t.setState({isOpen:!0,isShow:!0})},t.closeModal=function(){t.setState({isOpen:!1}),t.state.callback&&t.state.callback.call(),setTimeout((function(){return t.setState({isShow:!1})}),300)},t.createModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.createElement("p",null,"\u041f\u0443\u0441\u0442\u043e"),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.setState({component:e,title:a,callback:n}),t.openModal()},t.template=function(){return r.a.createElement(ke,Object.assign({},t.state,{closeModal:t.closeModal,openModal:t.openModal}),t.state.component?t.state.component:null)},t.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,Object.assign({closeModal:t.closeModal,createModal:t.createModal,modalIsOpen:t.state.isOpen},t.props)),t.state.isShow?r.a.createElement(l.template,null):null)},t}return n}(r.a.Component)},Me=a(25),Te=a(189),Ae=a(190),Be=a(193),Re=a(38),He=a(432),Pe=a(204),Ue=a.n(Pe),Ve=a(60),We=a(100),ze=a.n(We),qe=function(e){return r.a.createElement(Te.a,Object.assign({className:ze.a.input,variant:"outlined",component:Ve.TextField},e))},Ye=function(e){var t=e.message,a=e.error,n=e.handleSubmit,l=(e.pristine,e.submitting,e.initialId),i=void 0===l?null:l;return r.a.createElement("form",{className:ze.a.form,onSubmit:n},r.a.createElement(qe,{name:"id",label:"ID",style:{display:i?"none":""}}),r.a.createElement(qe,{name:"imdbID",label:"imdbID",disabled:!!a}),r.a.createElement(qe,{name:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",disabled:!!a}),r.a.createElement(qe,{name:"titleEn",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u043e\u043c",disabled:!!a}),r.a.createElement(qe,{name:"year",label:"\u0413\u043e\u0434",disabled:!!a}),r.a.createElement(qe,{name:"country",label:"\u0421\u0442\u0440\u0430\u043d\u0430",disabled:!!a}),r.a.createElement(qe,{name:"poster",label:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 (url)",disabled:!!a}),r.a.createElement(qe,{name:"video",label:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 (youtube id)",disabled:!!a}),r.a.createElement(qe,{name:"genres",label:"\u0416\u0430\u043d\u0440\u044b (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)",disabled:!!a}),r.a.createElement(qe,{name:"type",label:"\u0422\u0438\u043f (movie, series)",disabled:!!a}),r.a.createElement(qe,{name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",disabled:!!a,rows:5,multiline:!0}),t&&r.a.createElement("p",{className:ze.a.message},t),a&&r.a.createElement("p",{className:ze.a.errorMessage},a),r.a.createElement(He.a,{type:"submit",size:"large",color:"primary",variant:"contained",startIcon:r.a.createElement(Ue.a,null),disabled:!!a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};Ye=Object(Ae.a)({form:"editFilm",validate:function(e){var t={};return e.id||(t.id="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",t._error="ID - \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),t}})(Ye);var Ge=["imdbID","title","titleEn","year","country","poster","video","type","description"],Xe=function(e){var t=e.initialId,a=void 0===t?null:t,l=e.delayDebounce,i=void 0===l?1e3:l,o=e.callback,m=void 0===o?null:o,s=Object(c.c)(),u=Object(c.d)(Object(Be.a)("editFilm")),p=Object(n.useState)(null),f=Object(y.a)(p,2),E=f[0],v=f[1];Object(n.useEffect)((function(){s(Object(Re.a)("editFilm","id",a))}),[s,a]),Object(n.useEffect)((function(){E&&setTimeout((function(){return v(null)}),5e3)}),[E]),A(Object(C.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===u||void 0===u?void 0:u.id,!e.t0){e.next=5;break}return e.next=4,L.getFilmById(u.id);case 4:e.t0=e.sent;case 5:(t=e.t0)?(s(Object(Re.a)("editFilm","genres",Object(Me.a)(t.genres.map((function(e){return e.name}))).join(", "))),Ge.forEach((function(e){return s(Object(Re.a)("editFilm","".concat(e),t[e]))}))):(s(Object(Re.a)("editFilm","genres","")),Ge.forEach((function(e){return s(Object(Re.a)("editFilm","".concat(e),""))})));case 7:case"end":return e.stop()}}),e)}))),i,[null===u||void 0===u?void 0:u.id]);return r.a.createElement(Ye,{onSubmit:function(e){var t=Object(d.a)({},e);t.genres=(null===t||void 0===t?void 0:t.genres)?t.genres.split(",").map((function(e){return{name:e}})):[],t.year=Number(t.year),L.updateFilm(t.id,t).then((function(){return v("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")})).then((function(){return m&&m.call()})).catch((function(){return s(Object(Re.c)("editFilm",{_error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430"}))}))},initialId:a,message:E})},Ze=a(205),Je=a.n(Ze),Qe=a(101),$e=a.n(Qe),Ke=function(e){return r.a.createElement(Te.a,Object.assign({className:$e.a.input,variant:"outlined",component:Ve.TextField},e))},et=function(e){var t=e.message,a=e.errorMessage,n=e.handleSubmit,l=e.initialId,i=void 0===l?null:l;return r.a.createElement("form",{className:$e.a.form,onSubmit:n},r.a.createElement(Ke,{name:"id",label:"ID",style:{display:i?"none":""},required:!0}),t&&r.a.createElement("p",{className:$e.a.message},t),a&&r.a.createElement("p",{className:$e.a.errorMessage},a),r.a.createElement(He.a,{type:"submit",size:"large",color:"primary",variant:"contained",startIcon:r.a.createElement(Je.a,null)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))};et=Object(Ae.a)({form:"deleteFilm"})(et);var tt=function(e){var t=e.initialId,a=void 0===t?null:t,l=e.callback,i=void 0===l?null:l,o=Object(c.c)(),m=Object(n.useState)(null),s=Object(y.a)(m,2),u=s[0],d=s[1],p=Object(n.useState)(null),f=Object(y.a)(p,2),E=f[0],v=f[1];Object(n.useEffect)((function(){o(Object(Re.a)("deleteFilm","id",a))}),[o,a]);return r.a.createElement(et,{onSubmit:function(e){var t=e.id;L.deleteFilm(t).then((function(){return d("\u0424\u0438\u043b\u044c\u043c \u0443\u0434\u0430\u043b\u0435\u043d")})).then((function(){return i&&setTimeout((function(){return i.call()}),4e3)})).catch((function(){return v("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430")})),o(Object(Re.b)("deleteFilm"))},initialId:a,message:u,errorMessage:E})},at=x.a.create({baseURL:"https://movie-database-imdb-alternative.p.rapidapi.com/",headers:{"x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":"421df21564mshec026f33dbed2d1p17da9djsn5014d3c84f92"}}),nt={getFilm:function(e){return at.get("?i=".concat(e,"&r=json")).then((function(e){return e.data}))}},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return function(a){a({type:"SET_LOADED",payload:!1}),L.getFilmsPage(e,t).then((function(e){return a(it(e))}))}},lt=function(e){return function(t){nt.getFilm(e.imdbID).then((function(a){return t(ct(Object(d.a)(Object(d.a)({},e),a)))}))}},it=function(e){return{type:"SET_FILMS",payload:{items:Object(Me.a)(e.search),totalItems:e.totalResults}}},ct=function(e){return{type:"SET_ACTIVE_FILM",payload:e}},ot=a(152),mt=a.n(ot),st=Le(r.a.memo((function(e){var t=e.createModal,a=e.closeModal,n=e.modalIsOpen,l=(Object(ce.a)(e,["createModal","closeModal","modalIsOpen"]),Object(c.c)()),i=Object(c.d)((function(e){return function(e){return e.films.items}(e)})),o=Object(c.d)((function(e){return function(e){return e.films.totalItems}(e)})),m=Object(c.d)((function(e){return e.films.isLoaded})),s=Object(c.d)((function(e){return e.pagination})),u=s.page,d=s.pageSize,p=Object(c.d)((function(e){return function(e){return e.users.user}(e)}));r.a.useEffect((function(){!n&&l(rt(u,d))}),[n,l,u,d]);var f=function(){return a()},E=function(e,a){t(r.a.createElement(Xe,{initialId:e,delayDebounce:0,callback:f}),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c: ".concat(a))},v=function(e,a){t(r.a.createElement(tt,{initialId:e,callback:f}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c: ".concat(a))},_=function(e){if(e===u)return!1;l({type:"SET_PAGE",payload:e})},b=r.a.createElement("div",{className:"container"},r.a.createElement(Ee.a,{activePage:u,itemsCountPerPage:d,totalItemsCount:o,hideNavigation:!0,onChange:_.bind(this)}),r.a.createElement("div",{className:mt.a.FilmLibWrapper},i.map((function(e){return r.a.createElement(Fe,{key:e.id,title:e.title,poster:e.poster,filmName:e.title,filmYear:e.year,onClickDeleteButton:function(){return v(e.id,e.title)},onClickEditButton:function(){return E(e.id,e.title)},showButtons:null===p||void 0===p?void 0:p.isAdmin})}))),r.a.createElement(Ee.a,{activePage:u,itemsCountPerPage:d,totalItemsCount:o,hideNavigation:!0,onChange:_.bind(this)})),h=r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"container"},r.a.createElement(Ie,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null),r.a.createElement(ye,null)));return r.a.createElement("div",{className:mt.a.FilmsContainer},r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero__wrapper"},r.a.createElement("div",{className:"hero__image-wrapper"},r.a.createElement("img",{className:"hero__image",src:me.a,alt:"\u0421\u0442\u0435\u0442\u0445\u0435\u043c"})),r.a.createElement("div",{className:"hero__text-wrapper"},r.a.createElement("p",{className:"hero__text"},"\u041b\u0443\u0447\u0448\u0435 \u0438\u043c\u0435\u0442\u044c \u0434\u0440\u0443\u0433\u0430,"),r.a.createElement("p",{className:"hero__big-text"},"\u0447\u0435\u043c ",r.a.createElement("b",null,"\u0414\u0420\u0423\u0413 \u0414\u0420\u0423\u0413\u0410")))))),m?b:h)}))),ut=a(31),dt=a.n(ut);var pt=function(e){var t=e.name,a=e.value;return r.a.createElement("div",{className:dt.a.FilmDetailFieldItem},r.a.createElement("p",{className:dt.a.FilmDetailFieldItemName},t),r.a.createElement("p",{className:dt.a.FilmDetailFieldItemValue},a))},ft=a(206),Et=function(e){return r.a.createElement(ft.a,{source:{type:"video",sources:[{src:e.youtubeId,provider:"youtube"}]}})},vt=r.a.memo((function(e){var t=Object(c.c)(),a=Object(c.d)((function(e){return e.films})).activeItem;r.a.useEffect((function(){var a;return t((a=e.match.params.title,function(e){L.searchFilms(a).then((function(t){return e(lt(t[0]))}))})),function(){return t(ct(null))}}),[t,e.match.params.title]);return r.a.createElement("div",{className:dt.a.FilmDetail},a?function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:dt.a.FilmDetailWrapper},r.a.createElement("div",{className:dt.a.FilmDetailTop},r.a.createElement("div",{className:dt.a.FilmDetailImageWrapper},r.a.createElement("img",{className:dt.a.FilmDetailImage,src:a.poster,alt:a.title})),r.a.createElement("div",{className:dt.a.FilmDetailRight},r.a.createElement("h1",null,a.title),r.a.createElement("p",null,a.titleEn),r.a.createElement("span",{className:dt.a.id},"id: ",a.id),r.a.createElement("div",{className:dt.a.FilmDetailField},r.a.createElement(pt,{name:"\u0413\u043e\u0434",value:a.year}),r.a.createElement(pt,{name:"\u0421\u0442\u0440\u0430\u043d\u0430",value:a.country}),r.a.createElement(pt,{name:"\u0410\u043a\u0442\u0435\u0440\u044b",value:a.Actors}),r.a.createElement(pt,{name:"IMDb",value:(e=null===a||void 0===a?void 0:a.imdbID,r.a.createElement("a",{href:"https://www.imdb.com/title/".concat(e),target:"_blank",rel:"noopener noreferrer"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"))}),r.a.createElement(pt,{name:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 IMDb",value:a.imdbRating}),r.a.createElement(pt,{name:"Metascore",value:a.Metascore}),r.a.createElement(pt,{name:"\u0416\u0430\u043d\u0440\u044b",value:a.Genre}),r.a.createElement(pt,{name:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:a.Runtime}),r.a.createElement(pt,{name:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",value:a.Rated}),r.a.createElement(pt,{name:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:a.description})),r.a.createElement(o.b,{to:"/",className:dt.a.FilmDetailLink},"\u041d\u0430\u0437\u0430\u0434"))),r.a.createElement("div",{className:"plyr-wrapper"},a.video&&r.a.createElement(Et,{youtubeId:a.video}))));var e}():r.a.createElement(Ie,null))})),_t=a(98),bt=function(e){var t=function(t){Object(Se.a)(n,t);var a=Object(xe.a)(n);function n(){return Object(Ce.a)(this,n),a.apply(this,arguments)}return Object(_t.a)(n,[{key:"render",value:function(){return this.props.user?r.a.createElement(e,Object.assign({},this.props,{user:this.props.user})):r.a.createElement(j.a,{to:"/profile/auth/"})}}]),n}(r.a.Component);return Object(c.b)((function(e){return{user:e.users.user}}))(t)},ht=a(208),gt=function(e){return r.a.createElement("div",{className:z()({modal:!0,"modal--active":e.isModalOpen}),onClick:function(t){t.target===t.currentTarget&&e.toggleModalHadler()}},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"modal-top"},r.a.createElement("h4",{className:"modal-top__title"},e.title),r.a.createElement("div",{className:"modal-top__close-button",onClick:e.toggleModalHadler})),r.a.createElement("div",{className:"modal-content"},e.children)))},Nt=a(191),Ot=a(210),Ft=a.n(Ot),jt=a(65),yt=a.n(jt),wt=function(e){return r.a.createElement("form",{className:yt.a.form,onSubmit:e.formSubmit,name:"create"},e.message&&r.a.createElement("p",{className:yt.a.message},e.message),r.a.createElement(Nt.a,{className:yt.a.input,name:"imdbID",label:"imdbID",variant:"outlined",required:!0}),r.a.createElement(Nt.a,{className:yt.a.input,name:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",required:!0}),r.a.createElement(Nt.a,{className:yt.a.input,name:"video",label:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 (youtube id)",variant:"outlined"}),r.a.createElement(Nt.a,{className:yt.a.input,name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",rows:5,multiline:!0}),r.a.createElement(He.a,{name:"button",type:"submit",size:"large",color:"primary",variant:"contained",startIcon:r.a.createElement(Ft.a,null)},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))},Dt=a(47),It=a.n(Dt),Ct=Le((function(e){var t=Object(c.c)(),a=r.a.useState(!1),n=Object(y.a)(a,2),l=n[0],i=n[1],o=r.a.useState(null),m=Object(y.a)(o,2),s=m[0],u=m[1],d=r.a.useState(null),p=Object(y.a)(d,2),f=p[0],E=p[1],v=r.a.useState(null),_=Object(y.a)(v,2),b=_[0],h=_[1],g=Object(c.d)((function(e){return e.films.items}));r.a.useEffect((function(){!l&&h(null),t(rt(1,50))}),[t,l]);var N,O,F=function(e){var t,a;i(!l),u((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.innerText)||null),E((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.dataset.content)||null)};return g.length&&((N=Object.keys(g[0]).map((function(e){return{field:String(e),width:200}})))[0].width=60,N[3].width=100,N[4].width=100,N[5].width=100,N[6].width=300,N[7].width=400,N[10]={},O=Object(Me.a)(g)),r.a.createElement("div",{className:It.a.API},r.a.createElement("h2",{className:It.a.title},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432"),r.a.createElement("div",{className:It.a.wrapper},r.a.createElement("button",{className:It.a.button,onClick:F,"data-content":"create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"),r.a.createElement("button",{className:It.a.button,onClick:function(){return e.createModal(r.a.createElement(Xe,null),"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"),r.a.createElement("button",{className:It.a.button,onClick:function(){return e.createModal(r.a.createElement(tt,null),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c")),r.a.createElement("div",{className:It.a.filmsWrapper},r.a.createElement("h2",{className:It.a.title},"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432"),r.a.createElement("div",{className:It.a.films},r.a.createElement("div",{style:{height:800,width:"100%"}},g.length&&r.a.createElement(ht.a,{rows:O,columns:N,rowHeight:25,checkboxSelection:!0})))),r.a.createElement(gt,{title:s,toggleModalHadler:F,isModalOpen:l},"create"===f&&r.a.createElement(wt,{formSubmit:function(e){e.preventDefault();var t=e.target,a={};switch(t.name){case"create":nt.getFilm(t.imdbID.value).then((function(e){return a={imdbID:t.imdbID.value,title:t.title.value,description:t.description.value,country:e.Country,genres:e.Genre.split(",").map((function(e){return{name:e}})),poster:e.Poster,titleEn:e.Title,type:e.Type,video:t.video.value,year:+e.Year},L.instance.post("create",a).then((function(){return h("\u0423\u0441\u043f\u0435\u0448\u043d\u043e")})),t.reset()}));break;default:return console.warn("\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u0444\u043e\u0440\u043c\u044b")}},message:b})))})),St=function(e){var t=e.user,a=e.onImageChange,n=e.onButtonClick,l=t.avatar?t.avatar:"https://www.tclilibrary.com/admin2/dist/use.png";return r.a.createElement("section",{className:"profile-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"profile-about"},r.a.createElement("h1",{className:"page-title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),r.a.createElement("div",{className:"profile-about__wrapper"},r.a.createElement("div",{className:"profile-about__aside"},r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",{className:"profile-info__image-wrapper"},r.a.createElement("label",null,r.a.createElement("input",{name:"avatar",type:"file",style:{display:"none"},accept:".jpg, .jpeg, .png",onChange:a}),r.a.createElement("img",{className:"profile-info__image",src:l,alt:t.name}))),r.a.createElement("button",{className:"profile-info__logout",onClick:n},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement("div",{className:"profile-info__name"},t.name))),r.a.createElement("div",{className:"profile-about__content"},t.isAdmin?r.a.createElement(Ct,null):null)))))},xt=function(e){var t=e.user,a=Object(c.c)();return r.a.createElement(St,{onImageChange:function(e){var n,r=new FormData;r.append("avatar",e.target.files[0]),r.append("id",t.id),t.avatar&&r.append("url",t.avatar.split("/").reverse()[0]),a((n=r,function(e){K.setUserAvatar(n).then((function(t){return e(le(t))}))}))},onButtonClick:function(){ae("login"),ae("password"),a(re(null))},user:t})},kt=bt((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null,r.a.createElement("p",{className:"hero__text"},"\u0415\u0441\u043b\u0438 \u0432\u043e\u043b\u043a \u043c\u043e\u043b\u0447\u0438\u0442, \u0442\u043e"),r.a.createElement("p",{className:"hero__big-text"},"\u043b\u0443\u0447\u0448\u0435 \u0435\u0433\u043e \u043d\u0435 ",r.a.createElement("b",null,"\u043f\u0435\u0440\u0435\u0431\u0438\u0432\u0430\u0442\u044c"))),r.a.createElement(xt,e))})),Lt=function(e){var t=e.handleSubmit,a=e.pristine,n=e.submitting;return r.a.createElement("form",{className:"auth-form",onSubmit:t},r.a.createElement("h2",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(Te.a,{className:"auth-form__input",name:"login",type:"text",label:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",autoComplete:"username",component:Ve.TextField,required:!0}),r.a.createElement(Te.a,{className:"auth-form__input",name:"password",type:"password",label:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"current-password",component:Ve.TextField,required:!0}),r.a.createElement(He.a,{color:"primary",type:"submit",variant:"contained",disabled:a||n},"\u0412\u043e\u0439\u0442\u0438"))};Lt=Object(Ae.a)({form:"auth"})(Lt);var Mt=function(e){var t=e.formSubmitHandler;return r.a.createElement("section",{className:"auth-section"},r.a.createElement("div",{className:"container"},r.a.createElement(Lt,{onSubmit:t})))};var Tt=function(e){var t=Object(c.c)(),a=Object(c.d)((function(e){return e.users.user}));return r.a.useEffect((function(){a&&e.history.push("/profile/")}),[a,e.history]),r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null,r.a.createElement("p",{className:"hero__text"},"\u041b\u0435\u0437\u0435\u0448\u044c \u0432 \u0412\u041e\u041b\u041a\u0418,"),r.a.createElement("p",{className:"hero__big-text"},"\u0430 \u0445\u0432\u043e\u0441\u0442 ",r.a.createElement("b",null,"\u0441\u043e\u0431\u0430\u0447\u0438\u0439"))),r.a.createElement(Mt,{formSubmitHandler:function(e){var a=e.login,n=e.password;t(ne({login:a,password:n}))}}))};var At=function(){return r.a.createElement(ie,null,r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/films/:title",component:vt}),r.a.createElement(j.b,{path:"/films/",component:st}),r.a.createElement(j.b,{path:"/profile/auth",component:Tt}),r.a.createElement(j.b,{path:"/profile/",component:kt}),r.a.createElement(j.b,{path:"/",component:pe})))},Bt=(a(378),r.a.createElement(o.a,null,r.a.createElement(c.a,{store:F},r.a.createElement(At,null))));i.a.render(Bt,document.getElementById("root"))},47:function(e,t,a){e.exports={wrapper:"API_wrapper__1aSB6",title:"API_title__1ZQn5",button:"API_button__1LxHb"}},65:function(e,t,a){e.exports={form:"CreateFilm_form__1PTed",input:"CreateFilm_input__3ONeu",message:"CreateFilm_message__1nvVn"}},93:function(e,t,a){e.exports=a.p+"static/media/hero-img.a3143511.png"},99:function(e,t,a){e.exports={Card:"FilmCard_Card__2m5XY",Hover:"FilmCard_Hover__ktyJM",Info:"FilmCard_Info__3764W",Buttons:"FilmCard_Buttons__PRefz"}}},[[245,1,2]]]);
//# sourceMappingURL=main.db00a1bf.chunk.js.map